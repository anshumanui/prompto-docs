<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Categories</title>
    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../css/prompto-frame.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/lib/jquery.min.js"></script>
    <script src="../../js/lib/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../js/lib/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript">

        var samples =  {
            c1 : "define fullName as Text attribute"
            + "\n" + "define Person as category with attribute fullName"
            + "\n"
            + "\n" + "define company as Text attribute"
            + "\n" + "define Employee as Person with attribute company",
            c2 : "define fullName as Text attribute"
            + "\n" + "define Person as category with attribute fullName"
            + "\n"
            + "\n" + "define company as Text attribute"
            + "\n" + "define Employee as Person with attribute company"
            + "\n"
            + "\n" + "define printPerson as method receiving Person p doing:"
            + "\n" + '    print "p -> " + p'
            + "\n"
            + "\n" + 'define main as method doing:'
            + "\n" + '    e = Employee with "Sally" as fullName and "The world" as company'
            + "\n" + '    printPerson e',
            c3 : "define brand as Text attribute"
            + "\n" + "define Product as category with attribute brand"
            + "\n"
            + "\n" + "define operatingSystem as Text attribute"
            + "\n" + "define Computer as Product with attribute operatingSystem"
            + "\n"
            + "\n" + "define supportedNetwork as Text attribute"
            + "\n" + "define Phone as Product with attribute supportedNetwork"
            + "\n"
            + "\n" + "define SmartPhone as Phone and Computer",
            c4 : "define brand as Text attribute"
            + "\n" + "define Product as category with attribute brand"
            + "\n"
            + "\n" + "define operatingSystem as Text attribute"
            + "\n" + "define Computer as Product with attribute operatingSystem"
            + "\n"
            + "\n" + "define supportedNetwork as Text attribute"
            + "\n" + "define Phone as Product with attribute supportedNetwork"
            + "\n"
            + "\n" + "define SmartPhone as Phone and Computer"
            + "\n"
            + "\n" + 'define main as method doing:'
            + "\n" + '    s = SmartPhone with "Apple" as brand, "Android" as operatingSystem and "4G" as supportedNetwork'
            + "\n" + '    print s'


        };

        function editorReady(frame, editor) {
            editor.setValue(samples[frame.name], -1);
        }

        function translatePromptoCode(content, from, to, editor) {
            parent.translatePromptoCode(content, from, to, editor);
        }

        function executePromptoCode(content, dialect, printer) {
            parent.executePromptoCode(content, dialect, printer);
        }


    </script>
</head>
<body>
<div class="container">
    <div class="row">
        <h2>Category inheritance</h2>

        <p>Prompto supports <i>category</i> inheritance, where a category extends another category, and therefore inherits its attributes and methods.<br/>
            In the E dialect, this is done by using the <i>name</i> of the category being extended in place of the <code>category</code> keyword.<br/>
            In the O dialect, this is done by appending to the category definition the <code>extend</code> keyword followed the <i>name</i> of the category being extended.<br/>
            In the M dialect, this is done by inserting the <i>name</i> of the category being extended before the list of attributes.<br/>
        </p>

        <div>
            <iframe class="displayer displayer-8-lines" name="c1" class="embed-responsive-item" src="../../code/displayer.html"></iframe>
        </div>
        <p/>
        <p>A category extending another category is often referred to as a <i>derived</i> category.</p>
        <p>An object of a derived category can be used anywhere an object of the original category is expected.</p>
        <p>In the below example, the <i>printPerson</i> method expects a <i>Person</i> object, and will accept any object inheriting from <i>Person</i>:</p>
        <p/>
        <div>
            <iframe class="displayer displayer-16-lines" name="c2" class="embed-responsive-item" src="../../code/displayer.html" runnable></iframe>
        </div>


        <h2>Multiple inheritance</h2>

        <p>Prompto supports <i>multiple</i> inheritance, where a category extends not just one category, but many.<br/>
            This is done by using a list of category names rather than just one:
        </p>
        <p/>
        <div>
            <iframe class="displayer displayer-14-lines" name="c3" class="embed-responsive-item" src="../../code/displayer.html"></iframe>
        </div>
        <p/>
        <p>In the above example, a <i>SmartPhone</i> is a <i>Product</i>, a <i>Computer</i> and a <i>Phone</i>.</p>
        <p>It inherits attributes and methods from those 3 categories i.e. <i>brand</i>, <i>operatingSystem</i> and <i>supportedNetwork</i>:</p>
        <p/>
        <div>
            <iframe class="displayer displayer-20-lines" name="c4" class="embed-responsive-item" src="../../code/displayer.html" runnable></iframe>
        </div>
        <p/>
        <p>Multiple inheritance of attributes in Prompto does not suffer from the <a href="https://en.wikipedia.org/wiki/Multiple_inheritance"><i>deadly diamond problem</i></a>.
            This is thanks to its unique <i>reified attributes</i> feature, where attributes are semantic types defined outside categories.</p>
        <p>In the above example, since attributes are defined globally,
            the <i>brand</i> attribute is the same in all 4 categories, and has the same meaning. From there, the <i>SmartPhone</i> category only inherits
            the <i>brand</i> attribute <i><b>once</b></i> (as opposed to multiple times in most OOP languages which support multiple inheritance).</p>
        <p/>
        <p>Multiple inheritance of methods in Prompto follows the inheritance sequence. This is described in the next section.</p>
    </div>
</body>
</html>